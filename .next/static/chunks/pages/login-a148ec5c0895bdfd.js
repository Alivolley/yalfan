(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{5071:function(e,t,n){"use strict";var l=n(4836);t.Z=void 0;var r=l(n(4938)),a=n(5893),s=(0,r.default)((0,a.jsx)("path",{d:"M22 24H2v-4h20v4zM13.06 5.19l3.75 3.75L7.75 18H4v-3.75l9.06-9.06zm4.82 2.68-3.75-3.75 1.83-1.83c.39-.39 1.02-.39 1.41 0l2.34 2.34c.39.39.39 1.02 0 1.41l-1.83 1.83z"}),"BorderColor");t.Z=s},3707:function(e,t,n){"use strict";var l=n(4836);t.Z=void 0;var r=l(n(4938)),a=n(5893),s=(0,r.default)((0,a.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"Cached");t.Z=s},2961:function(e,t,n){"use strict";var l=n(4836);t.Z=void 0;var r=l(n(4938)),a=n(5893),s=(0,r.default)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.Z=s},2450:function(e,t,n){"use strict";var l=n(4836);t.Z=void 0;var r=l(n(4938)),a=n(5893),s=(0,r.default)((0,a.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");t.Z=s},5616:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var l=n(7462),r=n(3366),a=n(7294),s=n(828),i=n(8883),o=n(6523),c=n(9707),u=n(6682),d=n(5893);let f=["className","component"];var p=n(7078),x=n(8239),m=n(606),h=n(1588);let v=(0,h.Z)("MuiBox",["root"]),g=(0,x.Z)(),j=function(e={}){let{themeId:t,defaultTheme:n,defaultClassName:p="MuiBox-root",generateClassName:x}=e,m=(0,i.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(o.Z),h=a.forwardRef(function(e,a){let i=(0,u.Z)(n),o=(0,c.Z)(e),{className:h,component:v="div"}=o,g=(0,r.Z)(o,f);return(0,d.jsx)(m,(0,l.Z)({as:v,ref:a,className:(0,s.Z)(h,x?x(p):p),theme:t&&i[t]||i},g))});return h}({themeId:m.Z,defaultTheme:g,defaultClassName:v.root,generateClassName:p.Z.generate});var y=j},4167:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(1691)}])},1691:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return X},default:function(){return G}});var l=n(5893),r=n(1163),a=n(7294),s=n(4640),i=n(5675),o=n.n(i),c=n(1664),u=n.n(c),d=n(9417),f=n(4054),p=n(3841),x=n(7058),m=n(7109),h=n(3946),v=n(1812),g=n(948),j=n(135),y=n(5616);function Z(){var e,t;let n=(e=["\n  input {\n    text-align: center;\n  }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return Z=function(){return n},n}let b=(0,g.ZP)(j.Z)(Z()),k={TextFieldStyled:b},C=e=>(0,l.jsx)(k.TextFieldStyled,{...e}),N={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function w(e){let t=a.useRef(()=>{throw Error("Cannot call an event handler while rendering.")});return a.useInsertionEffect(()=>{t.current=e}),a.useCallback(function(){for(var e,n=arguments.length,l=Array(n),r=0;r<n;r++)l[r]=arguments[r];return null===(e=t.current)||void 0===e?void 0:e.call(t,...l)},[])}let M=()=>!0,_=a.forwardRef((e,t)=>{let{value:n="",length:r=4,autoFocus:s=!1,onChange:i,TextFieldsProps:o,onComplete:c,validateChar:u=M,className:d,onBlur:f,...p}=e,x=a.useRef(n),m=w(c),h=w(e=>{let t=e.slice(0,r);return{isCompleted:t.length===r,finalValue:t}}),{onPaste:v,onFocus:g,onKeyDown:j,className:Z,placeholder:b,onBlur:k,..._}=o||{};a.useEffect(()=>{let{isCompleted:e,finalValue:t}=h(x.current);e&&m(t)},[r,m,h]);let z=r<=0?[]:Array.from({length:r},(e,t)=>({character:n[t]||"",inputRef:a.createRef()})),P=e=>z.findIndex(t=>{let{inputRef:n}=t;return n.current===e}),S=()=>z.map(e=>{let{character:t}=e;return t}),T=(e,t)=>{let n=S().map((n,l)=>e===l?t:n);return n.join("")},R=e=>{var t,n;null===(n=z[e])||void 0===n||null===(t=n.inputRef.current)||void 0===t||t.focus()},D=e=>{var t,n;null===(n=z[e])||void 0===n||null===(t=n.inputRef.current)||void 0===t||t.select()},E=e=>{e+1!==r&&(z[e+1].character?D(e+1):R(e+1))},F=(e,t)=>"function"!=typeof u||u(e,t),I=e=>{let t=P(e.target);if(0===t&&e.target.value.length>1){let{finalValue:t,isCompleted:n}=h(e.target.value);null==i||i(t),n&&(null==c||c(t)),D(t.length-1);return}let n=e.target.value[0]||"",l=n;l&&!F(l,t)&&(l="");let r=T(t,l);null==i||i(r);let{isCompleted:a,finalValue:s}=h(r);a&&(null==c||c(s)),""!==l?r.length-1<t?D(r.length):E(t):""===n&&r.length<=t&&D(t-1)},A=e=>{e.preventDefault(),e.target.select(),null==g||g(e)},B=e=>{let t=e.target,n=t.selectionStart,l=t.selectionEnd,r=P(t);if(t.value===e.key)e.preventDefault(),E(r);else if(N.backspace===e.key){if(t.value){if(0===n&&0===l){e.preventDefault();let t=T(r,"");null==i||i(t),t.length<=r&&D(r-1)}}else e.preventDefault(),D(r-1)}else N.left===e.key?(e.preventDefault(),D(r-1)):N.right===e.key?(e.preventDefault(),D(r+1)):N.home===e.key?(e.preventDefault(),D(0)):N.end===e.key&&(e.preventDefault(),D(z.length-1));null==j||j(e)},O=e=>{var t;e.preventDefault();let n=e.clipboardData.getData("text/plain"),l=e.target,a=z.findIndex(e=>{let{character:t,inputRef:n}=e;return""===t||n.current===l}),s=S(),o=(t=n.split(""),s.reduce((e,t,n)=>{let{characters:l,restArrayMerged:r}=e;if(n<a)return{restArrayMerged:r,characters:[...l,t]};let[s,...i]=r;return{restArrayMerged:i,characters:[...l,s||""]}},{restArrayMerged:t,characters:[]}).characters).map((e,t)=>F(e,t)?e:""),u=o.join("");null==i||i(u);let{isCompleted:d,finalValue:f}=h(u);d?(null==c||c(f),D(r-1)):D(u.length),null==v||v(e)},V=e=>{if(null==k||k(e),!z.some(t=>{let{inputRef:n}=t;return n.current===e.relatedTarget})){let{isCompleted:e,finalValue:t}=h(n);null==f||f(t,e)}};return(0,l.jsx)(y.Z,{display:"flex",gap:"20px",alignItems:"center",ref:t,className:"MuiOtpInput-Box ".concat(d||""),...p,children:z.map((e,t)=>{let{character:n,inputRef:r}=e;return(0,l.jsx)(C,{autoFocus:!!s&&0===t,autoComplete:"one-time-code",value:n,inputRef:r,className:"MuiOtpInput-TextField MuiOtpInput-TextField-".concat(t+1," ").concat(Z||""),onPaste:O,onFocus:A,onChange:I,onKeyDown:B,onBlur:V,placeholder:"function"==typeof b?b(t):b,..._},t)})})});var z=n(7555),P=n.n(z);n(1776);var S=n(3707),T=n(5071),R=n(2961),D=n(2450),E=n(3451),F=n(9769),I=function(e){let{initialCount:t=0,onComplete:n=()=>{}}=e,[r,i]=(0,a.useState)(t),o=(0,s.useTranslations)("login");return(0,a.useEffect)(()=>{if(r>0){let e=setTimeout(()=>{i(e=>e-1)},1e3);return()=>clearTimeout(e)}n()},[r,n]),(0,l.jsxs)("p",{className:"mt-4 text-xs tracking-[1px] text-textColor",children:["".concat(Math.floor(r/60).toString().padStart(2,"0"),":").concat((r%60).toString().padStart(2,"0"))," ",o("Until resend the code")]})},A=n(4334),B=n(1042),O=()=>(0,A.Z)("accounts/send-verification-code/",(e,t)=>B.Z.post(e,t.arg).then(e=>e.data)),V=n(1955),L=n(9473),H=n(4165),K=()=>{let e=(0,L.I0)();return(0,A.Z)("accounts/login/",(t,n)=>B.Z.post(t,n.arg).then(t=>{var n,l,r;return(null===(n=t.data)||void 0===n?void 0:n.is_admin)||(V.Z.set("yalfan_accessToken",null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.access,{expires:7}),V.Z.set("yalfan_refreshToken",null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.refresh,{expires:7}),V.Z.set("yalfan_isLogin",!0,{expires:7}),e((0,H.id)())),t.data}))},W=()=>{let e=(0,L.I0)();return(0,A.Z)("accounts/login-by-password/",(t,n)=>B.Z.post(t,n.arg).then(t=>{var n,l;V.Z.set("yalfan_accessToken",null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.access,{expires:7}),V.Z.set("yalfan_refreshToken",null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.refresh,{expires:7}),V.Z.set("yalfan_isLogin",!0,{expires:7}),e((0,H.id)())}))},X=!0,G=function(){let[e,t]=(0,a.useState)(1),[n,i]=(0,a.useState)(""),[c,g]=(0,a.useState)(""),[j,y]=(0,a.useState)(""),[Z,b]=(0,a.useState)(!0),[k,C]=(0,a.useState)(!1),N=(0,r.useRouter)(),{trigger:w,isMutating:M}=O(),{trigger:z,isMutating:A}=K(),{trigger:B,isMutating:V}=W(),L=(0,s.useTranslations)("login"),H=()=>{n&&w({phone_number:n},{onSuccess:()=>{t(2)}})},X=()=>{z({phone_number:n,code:c},{onSuccess:e=>{e.is_admin?t(3):N.back()}})},G=()=>{B({phone_number:n,code:c,password:j},{onSuccess:()=>{N.back()}})};return(0,l.jsx)(E.default,{className:"fixed inset-0 px-5 py-12 customMd:p-16",children:(0,l.jsxs)("div",{className:"h-full max-w-[486px] rounded-2xl bg-white p-7 2xl:max-w-[550px]",id:"container",children:[(0,l.jsxs)(u(),{href:"/",className:"flex w-fit items-center gap-2 customMd:gap-3",children:[(0,l.jsx)("div",{className:"w-[73px] shrink-0 customMd:h-16",children:(0,l.jsx)(o(),{src:F.Z,alt:"logo",className:"h-full w-full"})}),(0,l.jsxs)("div",{className:"space-y-0.5",children:[(0,l.jsx)("p",{className:"text-xl font-bold",children:L("yalfan")}),(0,l.jsx)("p",{className:"text-xs text-[#58595B]",children:L("online shop for bags")})]})]}),1===e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mt-10",children:[(0,l.jsx)("p",{className:"text-xl font-bold customMd:text-2xl",children:L("signup")}),(0,l.jsx)("p",{className:"mt-5 text-sm text-textColor customMd:text-base",children:L("To login yalfan enter your number first")})]}),(0,l.jsx)("div",{dir:"ltr",className:"mt-14",children:(0,l.jsx)(P(),{country:"ir",inputClass:"!w-full",specialLabel:"",value:n,onChange:e=>i(e),onKeyDown:e=>{"Enter"===e.key&&n&&H()}})})]}):2===e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mt-10",children:[(0,l.jsx)("p",{className:"text-xl font-bold customMd:text-2xl",children:L("Login with one time password")}),(0,l.jsxs)("p",{className:"mb-2 mt-5 text-sm text-textColor customMd:text-base",children:[L("Please enter the verification code sent to")," ",n," ",L("number")]}),(0,l.jsx)(d.Z,{startIcon:(0,l.jsx)(T.Z,{className:"!text-sm"}),size:"small",onClick:()=>{t(1),g("")},children:L("Edit phone number")})]}),(0,l.jsxs)("div",{className:"mt-12",children:[(0,l.jsx)(_,{value:c,onChange:e=>g(e),length:4,dir:"ltr",TextFieldsProps:{type:"number"},onKeyDown:e=>{"Enter"===e.key&&4===c.length&&X()},sx:{input:{MozAppearance:"textfield",appearance:"textfield","&::-webkit-inner-spin-button":{WebkitAppearance:"none",appearance:"none"}}}}),(0,l.jsx)(I,{initialCount:130,onComplete:()=>b(!1)})]})]}):3===e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mt-10",children:[(0,l.jsx)("p",{className:"text-xl font-bold customMd:text-2xl",children:L("Your number is an admin number")}),(0,l.jsx)("p",{className:"mb-3 mt-5 text-sm text-textColor customMd:text-base",children:L("Please enter your password")}),(0,l.jsx)(d.Z,{startIcon:(0,l.jsx)(T.Z,{className:"!text-sm"}),size:"small",onClick:()=>{t(1),g(""),y("")},children:L("Edit phone number")})]}),(0,l.jsx)("div",{className:"mt-10",children:(0,l.jsxs)(f.Z,{variant:"outlined",fullWidth:!0,children:[(0,l.jsx)(p.Z,{color:"customPink",children:L("Password")}),(0,l.jsx)(x.Z,{type:k?"text":"password",color:"customPink",autoComplete:"off",value:j,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&j&&G()},endAdornment:(0,l.jsx)(m.Z,{position:"end",children:(0,l.jsx)(h.Z,{onClick:()=>C(e=>!e),edge:"end",children:k?(0,l.jsx)(D.Z,{}):(0,l.jsx)(R.Z,{})})}),label:L("Password")})]})})]}):null,(0,l.jsxs)("div",{className:"space-y-4 self-end",children:[2===e&&(0,l.jsx)(v.Z,{fullWidth:!0,className:"!rounded-10 !py-3.5",variant:"outlined",size:"large",color:"customPink",type:"submit",endIcon:(0,l.jsx)(S.Z,{}),disabled:Z,onClick:H,loading:M,children:L("Resend the code")}),(0,l.jsx)(v.Z,{fullWidth:!0,className:"!rounded-10 !py-3.5 ".concat(M?"":"!text-white"),variant:"contained",size:"large",color:"customPink",onClick:1===e?H:2===e?X:3===e?G:null,loading:M||A||V,children:L("Proceed")})]})]})})}},3451:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var l=n(6829),r={src:"/_next/static/media/login-pic.5052755f.png"};let a=l.Z.div(()=>({backgroundImage:"url(".concat(null==r?void 0:r.src,")"),backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover","#container":{display:"grid",gridTemplateRows:"repeat(3 , auto) 1fr"}}));var s=a},828:function(e,t,n){"use strict";t.Z=function(){for(var e,t,n=0,l="";n<arguments.length;)(e=arguments[n++])&&(t=function e(t){var n,l,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(l=e(t[n]))&&(r&&(r+=" "),r+=l);else for(n in t)t[n]&&(r&&(r+=" "),r+=n)}return r}(e))&&(l&&(l+=" "),l+=t);return l}}},function(e){e.O(0,[324,774,888,179],function(){return e(e.s=4167)}),_N_E=e.O()}]);